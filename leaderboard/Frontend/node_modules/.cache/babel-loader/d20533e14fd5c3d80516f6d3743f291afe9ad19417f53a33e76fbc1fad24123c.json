{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getData,supabase}from'./Utils/api';import'./Leaderboard.css';// Translations for the different languages:\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const translations={ENG:{title:\"ðŸ† High Runs of the Month\",playerName:\"Player Name\",scoreText:\"Score\",dateText:\"Date (YYYY-MM-DD)\",addBtn:\"Add Score\",rank:\"Rank\",name:\"Name\",empty:\"No scores yet! Be the first!\"},NL:{title:\"ðŸ† Hoogste runs van de maand\",playerName:\"Spelernaam\",scoreText:\"Score\",dateText:\"Datum (JJJJ-MM-DD)\",addBtn:\"Score Toevoegen\",rank:\"Rang\",name:\"Naam\",empty:\"Nog geen scores! Wees de eerste!\"},FR:{title:\"ðŸ† Meilleures performances du mois\",playerName:\"Nom du Joueur\",scoreText:\"Score\",dateText:\"Date (AAAA-MM-JJ)\",addBtn:\"Ajouter un Score\",rank:\"Rang\",name:\"Nom\",empty:\"Aucun score pour le moment ! Soyez le premier !\"}};const Leaderboard=()=>{const[data,setData]=useState([]);const[newName,setNewName]=useState('');const[newScore,setNewScore]=useState('');const[lang,setLang]=useState('ENG');// Helper variable to make the JSX cleaner\nconst t=translations[lang];useEffect(()=>{getData().then(data=>{setData(JSON.parse(data));});},[]);const handleAddScore=async e=>{e.preventDefault();// Prevents the page from refreshing when the form is submitted\n// 1. Send the new data to Supabase\nconst{data,error}=await supabase.from('user_data').insert([{name:newName,score:Number(newScore)// Ensures the score is saved as a number, not a string\n}]).select();// This tells Supabase to send back the row it just created\n// 2. Handle any potential errors\nif(error){console.error(\"Error saving score:\",error.message);alert(\"Oops! Couldn't save the score. Check the console.\");return;}// 3. If successful, update the UI and clear the form\nif(data){// Clear the input fields so the next player can type\nsetNewName('');setNewScore('');// Refreshing leaderboard here!\ngetData().then(data=>{setData(JSON.parse(data));});}};// Sort the scores in descending order before rendering\nconst sortedScores=[...data].sort((a,b)=>b.score-a.score);return/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"language-selector\",children:[/*#__PURE__*/_jsx(\"span\",{className:lang==='ENG'?'active-lang':'',onClick:()=>setLang('ENG'),children:\"ENG\"}),\" /\",/*#__PURE__*/_jsx(\"span\",{className:lang==='NL'?'active-lang':'',onClick:()=>setLang('NL'),children:\" NL\"}),\" /\",/*#__PURE__*/_jsx(\"span\",{className:lang==='FR'?'active-lang':'',onClick:()=>setLang('FR'),children:\" FR\"})]}),/*#__PURE__*/_jsx(\"img\",{src:\"/dtj_logo.jpg\",className:\"leaderboard-logo\"}),/*#__PURE__*/_jsx(\"h2\",{children:t.title}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddScore,className:\"add-score-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:t.playerName,value:newName,onChange:e=>setNewName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:t.scoreText,value:newScore,onChange:e=>setNewScore(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:t.addBtn})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"leaderboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t.rank}),/*#__PURE__*/_jsx(\"th\",{children:t.name}),/*#__PURE__*/_jsx(\"th\",{children:t.scoreText}),/*#__PURE__*/_jsx(\"th\",{children:t.dateText.split(' ')[0]})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[sortedScores.map((entry,index)=>{var _entry$score$toLocale,_entry$score;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index===0?'ðŸ¥‡':index===1?'ðŸ¥ˆ':index===2?'ðŸ¥‰':index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"player-name\",children:entry.name}),/*#__PURE__*/_jsx(\"td\",{className:\"player-score\",children:(_entry$score$toLocale=(_entry$score=entry.score)===null||_entry$score===void 0?void 0:_entry$score.toLocaleString())!==null&&_entry$score$toLocale!==void 0?_entry$score$toLocale:'0'}),/*#__PURE__*/_jsx(\"td\",{className:\"player-date\",children:entry.created_at.substring(0,16)})]},index);}),sortedScores.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"empty-state\",children:t.empty})})]})]})]});};export default Leaderboard;","map":{"version":3,"names":["React","useState","useEffect","getData","supabase","jsx","_jsx","jsxs","_jsxs","translations","ENG","title","playerName","scoreText","dateText","addBtn","rank","name","empty","NL","FR","Leaderboard","data","setData","newName","setNewName","newScore","setNewScore","lang","setLang","t","then","JSON","parse","handleAddScore","e","preventDefault","error","from","insert","score","Number","select","console","message","alert","sortedScores","sort","a","b","className","children","onClick","src","onSubmit","type","placeholder","value","onChange","target","required","split","map","entry","index","_entry$score$toLocale","_entry$score","toLocaleString","created_at","substring","length","colSpan"],"sources":["C:/Users/cesar_5w126xu/Documents/Personal/Proyectos/Leaderboard-DTJ/leaderboard/Frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getData, supabase } from './Utils/api';\nimport './Leaderboard.css';\n\n\n// Translations for the different languages:\nconst translations = {\n  ENG: {\n    title: \"ðŸ† High Runs of the Month\",\n    playerName: \"Player Name\",\n    scoreText: \"Score\",\n    dateText: \"Date (YYYY-MM-DD)\",\n    addBtn: \"Add Score\",\n    rank: \"Rank\",\n    name: \"Name\",\n    empty: \"No scores yet! Be the first!\"\n  },\n  NL: {\n    title: \"ðŸ† Hoogste runs van de maand\",\n    playerName: \"Spelernaam\",\n    scoreText: \"Score\",\n    dateText: \"Datum (JJJJ-MM-DD)\",\n    addBtn: \"Score Toevoegen\",\n    rank: \"Rang\",\n    name: \"Naam\",\n    empty: \"Nog geen scores! Wees de eerste!\"\n  },\n  FR: {\n    title: \"ðŸ† Meilleures performances du mois\",\n    playerName: \"Nom du Joueur\",\n    scoreText: \"Score\",\n    dateText: \"Date (AAAA-MM-JJ)\",\n    addBtn: \"Ajouter un Score\",\n    rank: \"Rang\",\n    name: \"Nom\",\n    empty: \"Aucun score pour le moment ! Soyez le premier !\"\n  }\n};\n\n\nconst Leaderboard = () => {\n  const [data, setData] = useState([]);\n\n  const [newName, setNewName] = useState('');\n  const [newScore, setNewScore] = useState('');\n\n  const [lang, setLang] = useState('ENG');\n\n  // Helper variable to make the JSX cleaner\n  const t = translations[lang];\n\n  useEffect(() => {\n    getData().then(data => {\n      setData(JSON.parse(data));\n    });\n  }, []);\n\n\n  const handleAddScore = async (e) => {\n    e.preventDefault(); // Prevents the page from refreshing when the form is submitted\n\n    // 1. Send the new data to Supabase\n    const { data, error } = await supabase\n      .from('user_data')\n      .insert([\n        {\n          name: newName,\n          score: Number(newScore) // Ensures the score is saved as a number, not a string\n        }\n      ])\n      .select(); // This tells Supabase to send back the row it just created\n\n    // 2. Handle any potential errors\n    if (error) {\n      console.error(\"Error saving score:\", error.message);\n      alert(\"Oops! Couldn't save the score. Check the console.\");\n      return;\n    }\n\n    // 3. If successful, update the UI and clear the form\n    if (data) {\n      // Clear the input fields so the next player can type\n      setNewName('');\n      setNewScore('');\n\n      // Refreshing leaderboard here!\n      getData().then(data => {\n        setData(JSON.parse(data));\n      });\n    }\n  };\n\n  // Sort the scores in descending order before rendering\n  const sortedScores = [...data].sort((a, b) => b.score - a.score);\n\n  return (\n    <div className=\"leaderboard-container\">\n\n      <div className=\"language-selector\">\n        <span className={lang === 'ENG' ? 'active-lang' : ''} onClick={() => setLang('ENG')}>ENG</span> /\n        <span className={lang === 'NL' ? 'active-lang' : ''} onClick={() => setLang('NL')}> NL</span> /\n        <span className={lang === 'FR' ? 'active-lang' : ''} onClick={() => setLang('FR')}> FR</span>\n      </div>\n\n      <img src=\"/dtj_logo.jpg\" className=\"leaderboard-logo\" />\n      <h2>{t.title}</h2>\n\n      {/* Submission Form */}\n      <form onSubmit={handleAddScore} className=\"add-score-form\">\n        <input\n          type=\"text\"\n          placeholder={t.playerName}\n          value={newName}\n          onChange={(e) => setNewName(e.target.value)}\n          required\n        />\n        <input\n          type=\"number\"\n          placeholder={t.scoreText}\n          value={newScore}\n          onChange={(e) => setNewScore(e.target.value)}\n          required\n        />\n        <button type=\"submit\">{t.addBtn}</button>\n      </form>\n\n      {/* Leaderboard Table */}\n      <table className=\"leaderboard-table\">\n        <thead>\n          <tr>\n            <th>{t.rank}</th>\n            <th>{t.name}</th>\n            <th>{t.scoreText}</th>\n            {/* Grabs just the word 'Date/Datum' */}\n            <th>{t.dateText.split(' ')[0]}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {sortedScores.map((entry, index) => (\n            <tr key={index}>\n              <td>\n                {/* Add medals for the top 3 */}\n                {index === 0 ? 'ðŸ¥‡' : index === 1 ? 'ðŸ¥ˆ' : index === 2 ? 'ðŸ¥‰' : index + 1}\n              </td>\n              <td className=\"player-name\">{entry.name}</td>\n              <td className=\"player-score\">{entry.score?.toLocaleString() ?? '0'}</td>\n              <td className=\"player-date\">{entry.created_at.substring(0, 16)}</td>\n            </tr>\n          ))}\n          {sortedScores.length === 0 && (\n            <tr>\n              <td colSpan=\"4\" className=\"empty-state\">{t.empty}</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default Leaderboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}